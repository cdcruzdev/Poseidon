# Poseidon â€” LP Aggregator for Solana

> Compare, deploy, and auto-rebalance LP positions across Meteora, Orca, and Raydium â€” from one dashboard.

**ğŸ† Built for the Colosseum Agent Hackathon (Feb 2â€“12, 2026)**

**ğŸ¤– 100% AI-written code** â€” every line of agent, program, frontend, and test code was generated by an AI agent (hackathon requirement).

---

## What It Does

- **Aggregates** LP pools across Meteora DLMM, Orca Whirlpools, and Raydium CLMM
- **Compares** yield, TVL, volume, and fees in real-time
- **Auto-rebalances** positions when price exits range (agent monitors 24/7)
- **On-chain opt-in** â€” users sign a transaction to authorize rebalancing with configurable slippage/yield thresholds
- **Target yield mode** â€” set a daily yield target, agent calculates optimal range width

## Architecture

```
â”œâ”€â”€ agent/           # TypeScript autonomous agent (core logic + API server)
â”œâ”€â”€ programs/        # Anchor program (Rust) â€” on-chain rebalance config
â”œâ”€â”€ frontend/        # Next.js dashboard
â””â”€â”€ tests/           # Devnet integration tests
```

| Component | Stack |
|-----------|-------|
| Agent | TypeScript, @solana/web3.js, Express |
| On-chain | Anchor (Rust), Solana devnet |
| Frontend | Next.js, React, TailwindCSS |
| Testing | Vitest (agent + frontend), ts-mocha (Anchor) |

## On-Chain Program

| | |
|---|---|
| **Program ID** | `2ro3VBKvqtc86DJVMnZETHMGAtjYFipZwdMFgtZGWscx` |
| **Network** | Solana Devnet |
| **Framework** | Anchor |

The program stores per-user rebalance preferences on-chain:
- `enable_rebalance` â€” opt in with max slippage + min yield improvement thresholds
- `disable_rebalance` â€” opt out
- `execute_rebalance` â€” agent calls this (authorized executor only) to record rebalance events

## Fee Model

| Fee | Amount | Split |
|-----|--------|-------|
| Deposit | 0.1% of position value | â€” |
| Performance | 5% of earned fees | 98% treasury, 2% agent gas |
| Free tier | Aggregator view only | No auto-rebalance |

## Test Coverage

**113+ tests** across 5 suites:

- `aggregator.test.ts` â€” pool discovery, ranking, cross-DEX comparison
- `fee-collector.test.ts` â€” fee calculation, treasury splits
- `position-monitor.test.ts` â€” rebalance triggers, range detection
- `api-server.test.ts` â€” REST API endpoints
- `frontend.test.ts` â€” UI components, state management

```bash
# Run agent tests
cd agent && pnpm test

# Run frontend tests
cd frontend && pnpm test
```

## Privacy

Privacy layer (Arcium integration) is **in development**. The current frontend has UI elements for it, but encrypted computation is not yet wired end-to-end.

## Getting Started

### Agent

```bash
cd agent
pnpm install
cp .env.example .env   # Add RPC URL + wallet path
pnpm dev
```

### Frontend

```bash
cd frontend
pnpm install
pnpm dev               # http://localhost:3000
```

### Anchor Program

```bash
# Requires Solana CLI + Anchor
anchor build
anchor deploy --provider.cluster devnet
anchor test
```

## Tech Stack

- **Solana** + **Anchor** â€” on-chain program
- **@solana/web3.js** â€” transaction construction
- **Meteora DLMM SDK** / **Orca Whirlpools SDK** / **Raydium SDK** â€” DEX adapters
- **Express** â€” agent API server
- **Next.js 14** + **TailwindCSS** â€” dashboard
- **Vitest** + **ts-mocha** â€” testing

## License

MIT
